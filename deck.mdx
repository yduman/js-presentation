export { default as theme } from "./theme";

# Workflow with Express & React

---

## Package Manager

- Choose your package manager
- either `npm` or `yarn`
- manage dependencies, scripts, meta-informations, ...
- the first thing to look at is `package.json`

---

## Bootstrapping

- run `yarn init`, this will generate `package.json`
- add dependencies with `yarn add <library>`
- add dev-dependencies with `yarn add --dev <library>`
- run scripts with `yarn <script_name>`
- install dependencies with `yarn`
- add `node_modules` to `.gitignore`

---

## Typical ``package.json``

```json
{
  "name": "retro",
  "version": "0.1.0",
  "private": true,
  "scripts": { },
  "dependencies": { },
  "devDependencies": { },
  "proxy": "http://localhost:8081"
}
```

Read more at https://docs.npmjs.com/files/package.json

---

## Lockfiles

- in order to get consistent installs across machines
- lockfiles contain the exact version of each dependency
- always commit to repository!
- `yarn.lock`
- `package-lock.json`

---

# Backend with Express

---

## Setup

- `yarn init`
- `yarn add express`
- `yarn add --dev nodemon`

```json
"scripts": {
  "start": "nodemon ./src/server.js"
}
```

- `yarn start`

---

## Hello World


```javascript
const express = require("express");
const http = require("http");

// init express app and supply it to an http server
const app = express();
const server = http.createServer(app);

app.get("/", (req, res) => {
  res.send({ hello: "world" });
});

const port = 8081;
server.listen(port, () => console.log(`Listening on port ${port}`));
```

---

## Sample Project Structure

```
backend/
|__ node_modules/
|__ src/
|   |__ public/
|   |__ utils/
|   |__ config/
|   |__ db/
|   |__ models/
|   |__ server.js
|__ package.json
|__ processes.json
|__ yarn.lock
```

---

## HTTP-Verbs

|Verb|Description|
|---|---|
|**GET**|should only retrieve data|
|**POST**|used to submit an entity to the specified resource|
|**PATCH**|used to apply partial modifications to a resource|
|**PUT**|replaces all current representations of <br/> the target resource with the request payload|
|**DELETE**|deletes the specified resource|

---

## Let's develop a REST API

---

## Scenario

- we will manage users
- usage of authentication and private routes
- usage of MongoDB and Mongoose ODM

---

## Our API

|HTTP|Endpoint|Description|
|---|---|---|
|**GET**|/api/user/me|get logged in user|
|**GET**|/api/user/:username|get user by username|
|**POST**|/api/user/|user registration|
|**POST**|/api/user/login|user login|
|**PATCH**|/api/user/me|reset username|
|**DELETE**|/api/user/:id|delete user by ID|
|**DELETE**|/api/user/logout|user logout|

---

## Setup

- install MongoDB and Robo3T
- create a folder where your backend will live in
- run `yarn init` inside
- run `yarn add express body-parser mongodb mongoose lodash jsonwebtoken`
- run `yarn add --dev nodemon chai mocha supertest`
- create a `src/` folder
- create your root file, e.g. `server.js`
- create your `start` script in `package.json`

---

- create `config/config.js`, to set some environment variables
- create `db/mongoose.js`, to configure mongoose

---

## Testing your API

---

## Deploying your API

---

# Frontend with React